{"version":3,"sources":["../../../../src/sdk/errorHandler/errorHandler.service.ts","../../../../src/sdk/errorHandler/constants.ts"],"sourcesContent":["import { entryPointErrorMsg, errorMsg } from \"./constants.js\";\n\nexport class ErrorHandler extends Error {\n    public rawError: string = null;\n    constructor(public error: string, public code?: number) {\n        super(error);\n        this.rawError = error;\n        this.code = code;\n        if (code) {\n            this.message = errorMsg[code.toString()];\n            if (entryPointErrorMsg[error]) {\n                this.message = entryPointErrorMsg[error];\n            }\n            \n        }\n    }\n}","export const errorMsg = {\n    '429': 'Rate limit exceeded for the given bundler api key. Please contact bundler team for increasing bandwidth.', // Rate limit quota execeeded\n    '-32521': 'Check for balance in your Smart wallet', // execution reverted\n    '-32500': `Please make sure you have enough funds for wallet creation.`, // transaction rejected by entryPoint's simulateValidation, during wallet creation or validation\n    '-32501': `Check paymaster data`,  // transaction rejected by paymaster's validatePaymasterUserOp\n    '-32502': 'If using skandha bundler or the default one, please report this issue on https://github.com/etherspot/skandha/issues or ticket on https://discord.etherspot.io', //transaction rejected because of opcode validation\n    '-32503': 'validUntil and validAfter cannot be past timestamps', // UserOperation out of time-range\n    '-32504': 'This paymaster is not whitelisted on current bundler, contact bundler team to whitelist', // transaction rejected because paymaster (or signature aggregator) is throttled/banned\n    '-32505': 'Factory or Wallet or Paymaster not staked or unstake-delay is too low. Try with another entity', // transaction rejected because some entity (or signature aggregator) stake or unstake-delay is too low\n    '-32506': 'Please create an issue https://github.com/etherspot/etherspot-modular-sdk/issues or ticket on https://discord.etherspot.io', // transaction rejected because wallet specified unsupported signature aggregator\n    '-32507': 'Please create an issue https://github.com/etherspot/etherspot-modular-sdk/issues or ticket on https://discord.etherspot.io', // transaction rejected because of wallet signature check failed (or paymaster signature, if the paymaster uses its data as signature)\n    '1': 'Make sure the sdk fn called has valid parameters', // sdk Validation errors,\n    '400': 'Either the bundler url is unreachable or the api key rate limit has reached. Please contact support for more info', // Bundler using ethers package returning SERVER_ERROR\n    '404': 'The request sent has reached timeout. Check your internet access or the bundler url if using etherspot bundler, the rate limit might be reached Please contact support for more info', // ethers package \n    '-429': 'Rate limit exceeded for the given bundler api key. Please contact bundler team for increasing bandwidth.', // Rate limit quota execeeded\n}\n\nexport const entryPointErrorMsg = {\n    'AA10 sender already constructed': 'The sender was already created, so the initCode does not need to be run. This error may occur if you attempt to create an account multiple times',\n    'AA13 initCode failed or OOG': 'The initCode failed to create the account or ran out of gas. \"OOG\" is an abbreviation for Out-Of-Gas. Check the amount of gas consumed, and then verify the initCode or the factory contract is correct',\n    'AA14 initCode must return sender': 'The initCode does not return the sender address. Check the initCode or the factory contract',\n    'AA15 initCode must create sender': 'The initCode in the user operation does not create an account. Check the initCode or the factory contract',\n    'AA20 account not deployed': 'The sender of the user operation is not deployed and there is no initCode specified. If this is the first transaction by this account make sure an initCode is included. Otherwise, check that the correct sender address is specified and is an ERC-4337 account',\n    \"AA21 didn't pay prefund\": `The sender did not have enough to prefund the EntryPoint for the user operation. If you are using a paymaster, the paymasterData field is likely not set. If you aren't using a paymaster, the address of the sender does not have enough gas token. After the user operation is executed, the remainder of the prefund is credited back to the sender`,\n    'AA22 expired or not due': 'The signature is not valid because it is outside of the specified time range',\n    'AA23 reverted (or OOG)': `The sender does not have sufficient native tokens to cover the User Operation's gas costs. If you intended to use a Paymaster for sponsorship, ensure that the paymasterData field of the user operation is correctly set to enable proper handling of gas fees`,\n    'AA24 signature error': `Check the signature field of the user operation. It may be in an incompatible format`,\n    'AA25 invalid account nonce': 'The nonce is invalid. The user operation may be re-using an old nonce, or formatted the nonce incorrectly',\n    'AA30 paymaster not deployed': 'The paymaster address specified by paymasterData contains no code. Check that the first characters of the paymasterData field are the paymaster address you intend to use',\n    'AA31 paymaster deposit too low': `The paymaster is out of funds. More gas tokens must be deposited into the EntryPoint for the paymaster. This is usually done by calling the paymaster contract's deposit function. If you are using a paymaster service, contact them immediately`,\n    'AA32 paymaster expired or not due': `The paymaster's signature is not valid because it is outside of the specified time range`,\n    'AA33 reverted (or OOG)': `The paymaster validation was rejected or ran out of gas. \"OOG\" is an abbreviation for Out-Of-Gas. First check the paymaster's signature in paymasterData. If the signature is correct, the verificationGasLimit may be too low`,\n    'AA34 signature error': `The paymaster's signature is invalid. Check the format of the signature in paymasterData`,\n    'AA40 over verificationGasLimit': `The verification gas limit was exceeded. Check the verificationGasLimit in your user operation`,\n    'AA41 too little verificationGas': `Verifying the user operation took too much gas and did not complete. You may need to increase verificationGasLimit`,\n    'AA50 postOp reverted': `After the user operation was completed, the execution of additional logic by the EntryPoint reverted`,\n    'AA51 prefund below actualGasCost': `The actual cost of the user operation is higher than the total amount of gas approved. The prefund is the amount that the EntryPoint is allowed to execute the user operation. After the user operation is executed, the remainder of the prefund is credited back to the sender`,\n}"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAO,IAAM,WAAW;AAAA,EACpB,OAAO;AAAA;AAAA,EACP,UAAU;AAAA;AAAA,EACV,UAAU;AAAA;AAAA,EACV,UAAU;AAAA;AAAA,EACV,UAAU;AAAA;AAAA,EACV,UAAU;AAAA;AAAA,EACV,UAAU;AAAA;AAAA,EACV,UAAU;AAAA;AAAA,EACV,UAAU;AAAA;AAAA,EACV,UAAU;AAAA;AAAA,EACV,KAAK;AAAA;AAAA,EACL,OAAO;AAAA;AAAA,EACP,OAAO;AAAA;AAAA,EACP,QAAQ;AAAA;AACZ;AAEO,IAAM,qBAAqB;AAAA,EAC9B,mCAAmC;AAAA,EACnC,+BAA+B;AAAA,EAC/B,oCAAoC;AAAA,EACpC,oCAAoC;AAAA,EACpC,6BAA6B;AAAA,EAC7B,2BAA2B;AAAA,EAC3B,2BAA2B;AAAA,EAC3B,0BAA0B;AAAA,EAC1B,wBAAwB;AAAA,EACxB,8BAA8B;AAAA,EAC9B,+BAA+B;AAAA,EAC/B,kCAAkC;AAAA,EAClC,qCAAqC;AAAA,EACrC,0BAA0B;AAAA,EAC1B,wBAAwB;AAAA,EACxB,kCAAkC;AAAA,EAClC,mCAAmC;AAAA,EACnC,wBAAwB;AAAA,EACxB,oCAAoC;AACxC;;;ADnCO,IAAM,eAAN,cAA2B,MAAM;AAAA,EAEpC,YAAmB,OAAsB,MAAe;AACpD,UAAM,KAAK;AADI;AAAsB;AADzC,SAAO,WAAmB;AAGtB,SAAK,WAAW;AAChB,SAAK,OAAO;AACZ,QAAI,MAAM;AACN,WAAK,UAAU,SAAS,KAAK,SAAS,CAAC;AACvC,UAAI,mBAAmB,KAAK,GAAG;AAC3B,aAAK,UAAU,mBAAmB,KAAK;AAAA,MAC3C;AAAA,IAEJ;AAAA,EACJ;AACJ;","names":[]}